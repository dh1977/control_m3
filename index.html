<!DOCTYPE html>
<html lang="en">
   <head>
      <title>Datos del veh&iacute;culo</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
      <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>

      <script>
         const lista_tipos = ['SEDAN','CAMIONETA','FURGON','STATION','CAMION','MOTO'];
         const lista_marcas = ['AUSTIN','CHEVROLET','FIAT','FORD','MAHINDRA','OPEL','PEUGEOT','RENAULT','SUZUKI','TOYOTA'];

         function validar_datos() {
            var tipoVeh = $('#txtTipoVehiculo').val();
            var patente = $('#txtPatente').val();
            var marca = $('#txtMarca').val();
            var modelo = $('#txtModelo').val();
            var anio = $('#txtAnio').val();
            var nChasis = $('#txtChasis').val();
            var nMotor = $('#txtMotor').val();
            var rut = $('#txtRut').val();
            var errMsg = "";

            if ( isNaN(anio) ) 
               errMsg = "Sólo números en el año.";
            else if ( anio < 1950 || anio > 2022 )
               errMsg = "El año debe ser entre 1950 y 2022.";
            else if ( isNaN(rut) ) 
               errMsg = "Sólo números en el Rut.";

            if ( errMsg == "") {
               // todo ok
               var datos = "Tipo veh&iacute;culo=" + tipoVeh + 
                           "\rPatente=" + patente + 
                           "\rMarca=" + marca +
                           "\rModelo=" + modelo +
                           "\rA&ntilde;o=" + anio +
                           "\rN&uacute;mero de chasis=" + nChasis +
                           "\rN&uacute;mero de motor=" + nMotor +
                           "\rRut=" + rut;
               window.open("mostrar_datos.html", datos);
               return true;
            }

            alert(errMsg);
            return false;
         }

         function AsignarTipo() {
            // Lleva el valor escogido en la dropdown mnuTipos hacia txtTipo
         }         

         function AsignarMarca() {
            // Lleva el valor escogido en la dropdown mnuMarcas hacia txtMarca
         }         

      </script>
   </head>

   <body>

      <form class="form ml-1" style="width: 80%; border: 2px solid black" method="get" onsubmit="return validar_form1()">
         <h2>Datos del veh&iacute;culo sinistrado:</h2>

         <div container class="form-table ml-5 style: border 1px grey">
            <div class="row">
               <div class="col">
                  Tipo de veh&iacute;culo:
               </div>
               <div class="col">
                  <div class="input-group">
                     <input type="text" class="form-control" id="txtTipoVehiculo" style="width: 5cm" readonly required>
                     <div class="input-group-append">
                       <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>
                       <div class="dropdown-menu" id="mnuTipos" onchange="AsignarTipo()">
                        <script>
                           for ( i=0; i < lista_tipos.length; i++ )
                              document.write('<a class="dropdown-item" href="#">' +lista_tipos[i] + '</a>');
                        </script>
                       </div>
                     </div>
                   </div>               
               </div>
            </div>

            <div class="row">
               <div class="col">
                  Patente (sin gu&oacute;n):
               </div>
               <div class="col">
                  <input class="form-control" type="text" id="txtPatente" minlength="6" maxlength="6" style="width: 4cm;" required>
               </div>
            </div>

            <div class="row">
               <div class="col">
                  Marca:
               </div>
               <div class="col">
                  <div class="input-group">
                     <input type="text" class="form-control" id="txtMarca" style="width: 5cm" readonly required>
                     <div class="input-group-append">
                       <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>
                       <div class="dropdown-menu" id="mnuMarcas" onclick="AsignarMarca()">
                        <script>
                           for ( i=0; i < lista_marcas.length; i++ )
                              document.write('<a class="dropdown-item" href="#">' +lista_marcas[i] + '</a>');
                        </script>
                       </div>
                     </div>
                   </div>               
               </div>
            </div>

            <div class="row">
               <div class="col">
                  Modelo:
               </div>
               <div class="col">
                  <input class="form-control" type="text" id="txtModelo" minlength="4" maxlength="30" style="width: 8cm;" required>
               </div>
            </div>

            <div class="row">
               <div class="col">
                  A&ntilde;o (ej: 2021):
               </div>
               <div class="col">
                  <input class="form-control" type="text" id="txtAnio" minlength="4" maxlength="4" style="width: 2cm;" required>
               </div>
            </div>

            <div class="row">
               <div class="col">
                  N&uacute;mero de chasis:
               </div>
               <div class="col">
                  <input class="form-control" type="text" id="txtChasis" minlength="10" maxlength="10" style="width: 5cm;" required>
               </div>
            </div>

            <div class="row">
               <div class="col">
                  N&uacute;mero de motor:
               </div>
               <div class="col">
                  <input class="form-control" type="text" id="txtMotor" minlength="10" maxlength="20" style="width: 9cm;" required>
               </div>
            </div>

            <div class="row">
               <div class="col">
                  Rut del asegurado (sin puntos ni gui&oacute;n):
               </div>
               <div class="col">
                  <input class="form-control" type="text" id="txtRut" minlength="6" maxlength="8" style="width: 5cm;" required>
               </div>
            </div> 

               <br>
               <button class="btn btn-primary"  onclick="validar_datos()">
                  Enviar
               </button>
               <br>
            </div>    <!-- fin tabla de datos -->

      </form>
   </body>
</html>
